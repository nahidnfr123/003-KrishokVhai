(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{F0F1:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,'.cata-list li.active a[data-v-3c6304f4]{color:#1e90ff!important;font-size:16px}.price[data-v-3c6304f4]{font-size:18px!important}.modal[data-v-3c6304f4]{position:fixed;overflow-y:scroll}.modal[data-v-3c6304f4]:before{height:100vh;width:100vw;content:"";background:rgba(40,40,40,.6);position:fixed}.displayImageContainer[data-v-3c6304f4]{transition:all .2s ease-in-out;cursor:pointer}.displayImageContainer.active[data-v-3c6304f4]{opacity:.6;filter:grayscale(1)}.displayImageContainer[data-v-3c6304f4]:hover{opacity:.7}',""])},JY3V:function(t,a,e){"use strict";var r={name:"ViewProducts",props:{showProductModal:{type:Boolean,default:!1},canAddToCart:{type:Boolean,default:!1},product:{type:[Object,Array],default:{}},user:{type:[Object,Array],default:{}},roles:{type:[Object,Array],default:{}}},data:function(){return{displayImageKey:0}},activated:function(){this.displayImageKey=0},methods:{closeViewProductModal:function(){this.$emit("closeViewProductModal")},showClickedImage:function(t,a){this.displayImageKey=a,this.$refs.LargeImage.src=t},addToCart:function(t){this.$emit("addToCart",t)}}},s=(e("sJ9S"),e("KHd+")),i=Object(s.a)(r,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.showProductModal&&t.product&&Object.keys(t.product).length?e("div",{staticClass:"modal fade bd-example-modal-lg show",staticStyle:{display:"block","padding-right":"17px"},attrs:{tabindex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-lg"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[t._v(t._s(t.product.product_name))]),t._v(" "),e("button",{staticClass:"close btn btn-sm btn-danger text-white",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.closeViewProductModal()}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[t.product.imageUrls&&t.product.imageUrls.length?e("div",{staticClass:"col-12 col-md-6"},[e("img",{ref:"LargeImage",staticClass:"rounded",staticStyle:{width:"100%","max-height":"400px !important"},attrs:{src:t.product.imageUrls[0],alt:"image"}}),t._v(" "),t.product.imageUrls.length>1?e("div",{staticClass:"mt-1 d-flex justify-content-start align-items-center"},t._l(t.product.imageUrls,(function(a,r){return e("div",{key:r,staticClass:"position-relative displayImageContainer",class:[t.displayImageKey==r?"active":""]},[e("img",{staticClass:"rounded",staticStyle:{margin:"2px 2px 0 0",height:"80px !important"},attrs:{src:a,alt:"image"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.showClickedImage(a,r)}}})])})),0):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"col-12 col-md-6"},[e("h3",{domProps:{textContent:t._s(t.product.product_name)}}),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"mt-1"},[e("strong",[t._v("Status: ")]),t._v(" "),t.product.status?e("span",{staticClass:"bg-success text-white"},[t._v("Active")]):e("span",{staticClass:"bg-danger text-white"},[t._v("Inactive")])]),t._v(" "),e("div",{staticClass:"mt-1"},[e("strong",[t._v("Regular price: ")]),t._v(t._s(t.product.regular_price)+" "+t._s(t.product.currency))]),t._v(" "),e("div",{staticClass:"mt-1"},[e("strong",[t._v("Retail price: ")]),t._v(t._s(t.product.retail_price)+" "+t._s(t.product.currency))]),t._v(" "),e("div",{staticClass:"mt-1"},[e("strong",[t._v("Stock: ")]),t._v(t._s(t.product.total_stock)+" "+t._s(t.product.stock_type))]),t._v(" "),t.product.minimum_order_amount<=1?e("div",{staticClass:"mt-1"},[e("strong",[t._v("Minimum order amount: ")]),t._v(t._s(t.product.minimum_order_amount)+" "+t._s(t.product.stock_type))]):e("div",{staticClass:"mt-1"},[e("strong",[t._v("Retail price starts from: ")]),t._v(t._s(t.product.minimum_order_amount)+" "+t._s(t.product.stock_type))]),t._v(" "),t.roles&&t.roles.includes("farmer")?t._e():[t.product.total_stock&&t.canAddToCart?e("button",{staticClass:"btn btn-sm btn-warning mt-3",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.addToCart(t.product)}}},[t._v("\n                                Add to cart\n                            ")]):t._e()],t._v(" "),e("div",{staticClass:"mt-3 mb-4"},[e("h4",{staticClass:"text-muted"},[t._v("About:")]),t._v("\n                            "+t._s(t.product.description)+"\n                        ")]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"mb-4"},[e("h5",{staticClass:"text-muted"},[t._v("Seller: ")]),t._v(" "),e("div",{staticClass:"d-flex justify-content-start align-items-center"},[e("img",{staticStyle:{height:"60px",width:"60px","border-radius":"50%","object-fit":"cover","object-position":"center","margin-right":"10px"},attrs:{src:t.product.seller.avatar,alt:""}}),t._v(" "),e("div",[t.user?t._e():e("router-link",{attrs:{to:"/login"}},[t._v(t._s(t.product.seller.first_name)+" "+t._s(t.product.seller.last_name))]),t._v(" "),t.user&&t.user.id==t.product.seller.id?e("a",{attrs:{href:"dashboard/@"+t.user.username+"/profile",target:"_blank"}},[t._v(t._s(t.product.seller.first_name)+" "+t._s(t.product.seller.last_name))]):t.user?e("a",{staticClass:"post-author",attrs:{href:"/dashboard/@"+t.user.username+"/users/view-profile/"+t.product.seller.id,target:"_blank"}},[t._v(t._s(t.product.seller.first_name)+" "+t._s(t.product.seller.last_name))]):t._e()],1)])])],2)])])])])]):t._e()}),[],!1,null,"3c6304f4",null);a.a=i.exports},RhbY:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,'.cata-list li.active a[data-v-5c60baea]{color:#1e90ff!important;font-size:16px}.price[data-v-5c60baea]{font-size:18px!important}.modal[data-v-5c60baea]{position:fixed;overflow-y:scroll}.modal[data-v-5c60baea]:before{height:100vh;width:100vw;content:"";background:rgba(40,40,40,.6);position:fixed}.displayImageContainer[data-v-5c60baea]{transition:all .2s ease-in-out;cursor:pointer}.displayImageContainer.active[data-v-5c60baea]{opacity:.6;filter:grayscale(1)}.displayImageContainer[data-v-5c60baea]:hover{opacity:.7}',""])},XQTU:function(t,a,e){"use strict";e.r(a);var r=e("o0o1"),s=e.n(r),i=e("L2JU"),o=e("2de+");function c(t,a,e,r,s,i,o){try{var c=t[i](o),n=c.value}catch(t){return void e(t)}c.done?a(n):Promise.resolve(n).then(r,s)}function n(t){return function(){var a=this,e=arguments;return new Promise((function(r,s){var i=t.apply(a,e);function o(t){c(i,r,s,o,n,"next",t)}function n(t){c(i,r,s,o,n,"throw",t)}o(void 0)}))}}function l(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?l(Object(e),!0).forEach((function(a){u(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function u(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var p={name:"Market",components:{ViewProducts:e("JY3V").a,Pagination:o.a},data:function(){return{canAddToCart:!0,loading:!1,searching:!1,products:{},pagination:{current_page:1},product:{},showProductModal:!1,filters:{query:"",category:[],category_name:"",price:[],location:[]}}},watch:{filters:{handler:_.debounce((function(){this.searching=!0,this.getProducts(!1)}),500),deep:!0}},computed:d({},Object(i.c)({productCategory:"productCategory/productCategories",user:"auth/user",roles:"auth/roles",cart:"cart/cart"})),activated:function(){this.canAddToCart=!0,this.checkCanAddToCart()},deactivated:function(){this.canAddToCart=!0},mounted:function(){this.getProdCat(),this.checkCanAddToCart(),this.getProducts()},methods:d(d({},Object(i.b)({fetchProductCategories:"productCategory/fetchProductCategory",getCart:"cart/getCart"})),{},{checkCanAddToCart:function(){var t=this.roles;if(t&&t.length)for(var a in t)if(!["customer","retailer"].includes(t[a]))return localStorage.removeItem("cart"),void(this.canAddToCart=!1)},handleChange:function(t){this.pagination.current_page=t,this.getProducts(!1)},getProdCat:function(){var t=this;return n(s.a.mark((function a(){return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.fetchProductCategories();case 2:case"end":return a.stop()}}),a)})))()},selectedCategories:function(t){if(this.filters.category=[],this.filters.category_name=t.title,this.filters.category.push(t.id),t.children)for(var a=0;a<t.children.length;a++)this.filters.category.push(t.children[a].id)},getProducts:function(){var t=arguments,a=this;return n(s.a.mark((function e(){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(t.length>0&&void 0!==t[0])||t[0],a.loading=r,e.next=4,axios.get("api/products/all?page=".concat(a.pagination.current_page),{params:_.omit(a.filters,"category_name")}).then((function(t){if(a.products=t.data.data,a.pagination=t.data.meta,a.searching){var e=a.$refs.ScrollPoint;e&&e.scrollIntoView({behavior:"smooth"})}})).catch((function(t){t.response.data.errors;a.$store.dispatch("snackbar/addSnack",{color:"danger",msg:"Server error",snakbarType:"Error"},{root:!0})})).finally((function(){a.loading=!1,a.searching=!1}));case 4:case"end":return e.stop()}}),e)})))()},clearSearch:function(){this.filters={query:"",category:[],category_name:"",price:[],location:[]}},addToCart:function(t){var a=t.total_stock,e=0,r=this.cart,s=r.findIndex((function(a){return a.product_slug===t.product_slug}));-1!==s&&(e=r[s].quantity),a<=e?this.$store.dispatch("snackbar/addSnack",{color:"danger",msg:"No more products in stock.",snakbarType:"Warning"},{root:!0}):(this.$store.commit("cart/addToCart",t),this.$store.dispatch("snackbar/addSnack",{color:"success",msg:"Success.",snakbarType:"Success"},{root:!0}),this.getCart())},viewProduct:function(t){this.showProductModal=!0,this.product=t},closeViewProductModal:function(){this.showProductModal=!1,this.product={}}})},v=(e("ddcu"),e("KHd+")),g=Object(v.a)(p,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t._m(0),t._v(" "),e("div",{staticClass:"famie-breadcrumb"},[e("div",{staticClass:"container"},[e("nav",{attrs:{"aria-label":"breadcrumb"}},[e("ol",{staticClass:"breadcrumb"},[e("li",{staticClass:"breadcrumb-item"},[e("router-link",{attrs:{to:"/"}},[e("i",{staticClass:"fa fa-home"}),t._v(" Home")])],1),t._v(" "),e("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Market")])])])])]),t._v(" "),t.canAddToCart?t._e():e("div",{staticClass:"container"},[t._m(1)]),t._v(" "),e("section",{ref:"ScrollPoint",staticClass:"shop-area section-padding-0-100"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"shop-filters mb-30 d-flex align-items-center justify-content-between"},[e("div",{staticClass:"product-show"},[e("h6",[t._v("Showing "+t._s(t.pagination.from)+"–"+t._s(t.pagination.to)+" of "+t._s(t.pagination.total)+" results")])]),t._v(" "),t._m(2)])])]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 col-md-4 col-lg-3"},[t.productCategory&&t.productCategory.length?e("div",{staticClass:"single-widget-area"},[e("h5",{staticClass:"widget-title"},[t._v("Catagories")]),t._v(" "),e("ul",{staticClass:"cata-list shop-page"},[e("li",{class:[t.filters.category.length<=0?"active":""]},[e("a",{attrs:{href:""},on:{click:function(a){a.stopPropagation(),a.preventDefault(),t.filters.category=[]}}},[e("strong",[t._v("All")])])]),t._v(" "),t._l(t.productCategory,(function(a){return e("li",{class:[t.filters.category.includes(a.id)?"active":""]},[e("a",{attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.selectedCategories(a)}}},[t._v("\n                                    "+t._s(a.title)+" "),e("span",[t._v("("+t._s(a.product_counter)+")")])]),t._v(" "),a.children?e("ul",{staticClass:"cata-list shop-page"},t._l(a.children,(function(a){return e("li",{class:[t.filters.category.includes(a.id)?"active":""]},[e("a",{attrs:{href:""},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.selectedCategories(a)}}},[t._v("\n                                            "+t._s(a.title)+" "),e("span",[t._v("("+t._s(a.product_counter)+")")])])])})),0):t._e()])}))],2)]):t._e()]),t._v(" "),e("div",{staticClass:"col-12 col-md-8 col-lg-9"},[e("div",{staticClass:"mb-3"},[e("div",{staticClass:"d-flex"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.filters.query,expression:"filters.query"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search: Product name, category, location"},domProps:{value:t.filters.query},on:{input:function(a){a.target.composing||t.$set(t.filters,"query",a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn bnt-sm btn-danger text-white",on:{click:function(a){return a.stopPropagation(),a.preventDefault(),t.clearSearch()}}},[t._v("\n                                Clear\n                            ")])]),t._v(" "),e("div",{staticClass:"mt-1"},[t.filters.query?e("span",[e("strong",[t._v("Query: ")]),t._v(t._s(t.filters.query))]):t._e(),t._v(" "),t.filters.category_name?e("span",[t._v(", "),e("strong",[t._v("Category: ")]),t._v(t._s(t.filters.category_name))]):t._e(),t._v(" "),t.filters.price.length?e("span",[t._v(", "),e("strong",[t._v("Price: ")]),t._v(t._s(t.filters.price))]):t._e()])]),t._v(" "),t.searching?e("div",{staticClass:"col-12"},[t._m(3)]):t._e(),t._v(" "),t.loading?e("div",{staticClass:"col-12"},[t.loading?e("loading",{attrs:{msg:"Loading products ..."}}):t._e()],1):t._e(),t._v(" "),!t.loading&&t.products&&Object.keys(t.products).length?e("div",{staticClass:"row"},[t._l(t.products,(function(a){return e("div",{key:a.id,staticClass:"col-12 col-sm-6 col-lg-4"},[e("div",{staticClass:"single-product-area mb-50"},[e("div",{staticClass:"product-thumbnail"},[e("img",{staticStyle:{height:"180px !important","object-fit":"cover","object-position":"center"},attrs:{src:a.first_image,alt:""}}),t._v(" "),"0"!=a.total_stock&&0!=a.total_stock&&a.total_stock?t._e():e("span",{staticClass:"product-tags bg-danger"},[t._v("\n                                        Out of stock\n                                    ")]),t._v(" "),e("div",{staticClass:"product-meta-data",staticStyle:{opacity:"1",visibility:"visible"}},[e("a",{attrs:{href:"#",title:"View Details"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.viewProduct(a)}}},[e("i",{staticClass:"fas fa-eye"})]),t._v(" "),t.roles&&t.roles.includes("farmer")?t._e():[a.total_stock&&t.canAddToCart&&("0"!=a.total_stock||0!=a.total_stock)?e("a",{attrs:{href:"#",title:"Add To Cart"},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addToCart(a)}}},[e("i",{staticClass:"icon_cart_alt"})]):t._e()]],2)]),t._v(" "),e("div",{staticClass:"product-desc text-center pt-4"},[e("a",{staticClass:"product-title",attrs:{href:"#"}},[t._v(t._s(a.product_name))]),t._v(" "),t.roles&&t.roles.length&&t.roles.includes("retailer")?e("div",[e("div",{staticClass:"price"},[t._v(t._s(a.retail_price)+" "+t._s(a.currency)+"\n                                            "),a.stock_type?[t._v(" / "+t._s(a.stock_type))]:t._e()],2)]):e("div",[e("div",{staticClass:"price"},[t._v(t._s(a.regular_price)+" "+t._s(a.currency)+"\n                                            "),a.stock_type?[t._v(" / "+t._s(a.stock_type))]:t._e()],2)]),t._v(" "),e("div",[t._v("Stock: "+t._s(a.total_stock)+"\n                                        "),a.stock_type?[t._v(" "+t._s(a.stock_type))]:t._e()],2)])])])})),t._v(" "),t.pagination.last_page>1?e("pagination",{attrs:{pagination:t.pagination,offset:5},on:{paginate:function(a){return t.handleChange(a)}}}):t._e()],2):e("div",[t.loading?t._e():e("div",{staticClass:"alert alert-info text-center"},[t._v("\n                            No products available!\n                        ")])])])])])]),t._v(" "),e("ViewProducts",{attrs:{showProductModal:t.showProductModal,canAddToCart:t.canAddToCart,user:t.user,roles:t.roles,product:t.product},on:{closeViewProductModal:t.closeViewProductModal,addToCart:function(a){return t.addToCart(a)}}})],1)}),[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"breadcrumb-area bg-img bg-overlay jarallax",staticStyle:{"background-image":"url('/frontend-assets/img/bg-img/18.jpg')"}},[a("div",{staticClass:"container h-100"},[a("div",{staticClass:"row h-100 align-items-center"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"breadcrumb-text"},[a("h2",[this._v("Market")])])])])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"alert alert-danger text-center"},[this._v("\n                You cannot order products. As your account type is not a Customer or Retailer account.\n            ")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"produtc-view-mode"},[a("a",{attrs:{href:"#"}},[a("i",{staticClass:"fa fa-th"})]),this._v(" "),a("a",{attrs:{href:"#"}},[a("i",{staticClass:"fa fa-list-ul"})])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"d-flex justify-content-center align-items-center bg-dark py-2 rounded text-white my-2"},[a("div",{staticClass:"spinner-border spinner-border-sm",staticStyle:{"margin-top":"1px"},attrs:{role:"status","aria-hidden":"true"}}),this._v(" "),a("div",{staticStyle:{"margin-left":"10px"}},[this._v("Searching ...")])])}],!1,null,"5c60baea",null);a.default=g.exports},"cra/":function(t,a,e){var r=e("RhbY");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(r,s);r.locals&&(t.exports=r.locals)},ddcu:function(t,a,e){"use strict";e("cra/")},jawQ:function(t,a,e){var r=e("F0F1");"string"==typeof r&&(r=[[t.i,r,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(r,s);r.locals&&(t.exports=r.locals)},sJ9S:function(t,a,e){"use strict";e("jawQ")}}]);